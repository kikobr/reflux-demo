var artemia=function(e){function i(f,j){return{storeType:j,storeName:f,dataBase:null,useReduce:!1,isAvailable:function(){try{var a=this;artemia[f]||(artemia[f]=window.openDatabase("Artemia","1.0","ARTEMIADB",65536));this.dataBase=artemia[f];this.dataBase.transaction(function(b){b.executeSql("CREATE TABLE IF NOT EXISTS  "+a.storeName+"(UniqueId TEXT UNIQUE PRIMARY KEY,SerializedObject TEXT)",[],null,null)})}catch(b){if(b===2)throw"Invalid database version";else throw"Unknown error "+b;}return!0},save:function(a,
b){var c,d,g=this;c=function(a,b){g.dataBase.transaction(function(c){c.executeSql("UPDATE "+g.storeName+" SET SerializedObject = ? WHERE UniqueId = ?;",[JSON.stringify(a),a.key],b(a),null)})};d=function(a,b){g.dataBase.transaction(function(c){if(!a.key)a.key=e.guidGenerator();c.executeSql("INSERT INTO "+g.storeName+" (UniqueId, SerializedObject) VALUES (?, ?);",[a.key,JSON.stringify(a)],b(a),null)})};a.key===void 0?d(a,b):this.get(a.key,function(g){g===null?d(a,b):c(a,b)})},get:function(a,b){var c=
this;c.dataBase.transaction(function(d){d.executeSql("SELECT SerializedObject FROM "+c.storeName+" WHERE UniqueId= ?;",[a],function(a,c){var d={},d=c.rows.length>0?JSON.parse(c.rows.item(0).SerializedObject):null;b(d)},function(){})})},remove:function(a,b){var c=this;c.dataBase.transaction(function(d){var g=typeof a==="string"?a:a.key;d.executeSql("DELETE FROM "+c.storeName+" WHERE UniqueId= ?;",[g],function(){b(g)},function(){})})},all:function(a){var b=this;b.dataBase.transaction(function(c){c.executeSql("SELECT * FROM "+
b.storeName+";",[],function(b,c){var f=[],h={},e;for(e=c.rows.length;e--;)h=c.rows.item(e),h=JSON.parse(h.SerializedObject),f.push(h);a(f)},function(){})})},nuke:function(a){var b=this;b.dataBase.transaction(function(c){c.executeSql("DELETE FROM "+b.storeName+";",[],function(){a()},function(){})})},drop:function(a){var b=this;b.dataBase.transaction(function(c){c.executeSql("DROP TABLE "+b.storeName+";",[],function(){a()},function(){})})}}}e.get_SQLITE_store=function(f,e){var a=i(f,e);a.isAvailable()||
(a=null);return a};return e}(artemia);